#include<stdio.h>
#include<conio.h>
main()
{
int a[100][100],b[100][100],i,j,m,n,l;
printf("enter the grid size \n");
scanf("%d",&n);
for(i=0;i<=n+1;i++)
 for(j=0;j<=n+1;j++)
 {
  a[i][j]=0;
  b[i][j]=0;
}
printf("enter the image k \n ");
  a[20][20]=0; a[20][21]=0; a[20][22]=0; a[20][23]=0;a[20][24]=0;a[20][25]=0;a[20][26]=0;a[20][27]=0;a[20][28]=0;
 a[21][20]=0;a[21][21]=0; a[21][22]=0;a[21][23]=0;a[21][24]=1;a[21][25]=1;a[21][26]=1;
a[22][20]=0;a[22][21]=0;a[22][22]=0;a[22][23]=0; a[22][24]=1; a[22][25]=1;a[22][26]=0;
 a[23][20]=0;a[23][21]=0;a[23][22]=0;a[23][23]=0;a[23][24]=1; a[23][25]=1;a[23][26]=1;
 a[24][20]=0;a[24][21]=0;a[24][22]=0;a[24][23]=0;a[24][24]=0; a[24][25]=0;a[24][26]=0;
 //a[25][20]=1;a[25][21]=1;a[25][22]=1;a[25][23]=0;a[25][24]=0; a[25][25]=0;a[25][26]=0;
// a[26][20]=1;a[26][21]=1;a[26][22]=1;a[26][23]=1;a[26][24]=1; a[26][25]=1;a[26][26]=1;
// a[27][20]=1;a[27][21]=1;a[27][22]=1;a[27][23]=1;a[27][24]=1; a[27][25]=1;a[27][26]=1;
 
  
/*a[20][20]=0; a[20][21]=1;  a[20][22]=1;a[20][23]=1; a[20][24]=1, a[20][25]=1;a[20][26]=1;a[20][27]=1;a[20][28]=1;
a[21][20]=1 ;a[21][21]=0; a[21][22]=1;a[21][23]=1;a[21][24]=1;a[21][25]=1;a[21][26]=1;a[21][27]=1;a[21][28]=1;
a[22][20]=1;a[22][21]=1;a[22][22]=1;a[22][23]=1;a[22][24]=1;a[22][25]=1;a[22][26]=1;a[22][27]=1;a[22][28]=1;
a[23][20]=1; a[23][21]=1;a[23][22]=1;a[23][23]=1;a[23][24]=1;a[23][25]=1;a[23][26]=1;a[23][27]=1;a[23][28]=1;
a[24][20]=1; a[24][21]=1;a[24][22]=1;a[24][23]=1;a[24][24]=1;a[24][25]=1;a[24][26]=1;a[24][27]=1;a[24][28]=1;
a[25][20]=1; a[25][21]=1;a[25][22]=1;a[25][23]=1;a[25][24]=1;a[25][25]=1;a[25][26]=1;a[25][27]=1;a[25][28]=1;
a[26][20]=1; a[26][21]=1;  a[26][22]=1;a[26][23]=1; a[26][24]=1; a[26][25]=1;a[26][26]=1;a[26][27]=1;a[26][28]=1;
a[27][20]=1; a[27][21]=1;  a[27][22]=1;a[27][23]=1; a[27][24]=1; a[27][25]=1;a[27][26]=1;a[27][27]=1;a[27][28]=1;
a[28][20]=1; a[28][21]=1;  a[28][22]=1;a[28][23]=1; a[28][24]=1; a[28][25]=1;a[28][26]=1;a[28][27]=1;a[28][28]=1; 
//a[15][15]=1;a[15][16]=1;a[16][14]=1;
// a[16][15]=1;a[16][16]=1;*/

 for(i=1;i<=n;i++){
 
 for(j=1;j<=n;j++)
//  if(a[i][j]==1)
 printf("%d ",a[i][j]);
 //   else
  //printf("%d ",' '); 
  printf("\n");
}
  printf(" rule 3\n");
  printf("enter the steps m\n");
   scanf("%d",&m);
   printf(" m value=%d\n",m);
   for(l=1;l<=m;l++)
   {
   printf("step %d\n",l);
  for(i=1;i<=n;i++)
 for(j=1;j<=n;j++)
   {
	 if(a[i+1][j-1]==1&& a[i+1][j+1]==0)
         b[i][j]=1;
     if(a[i+1][j-1]==0 && a[i+1][j+1]==1)
	      b[i][j] =1;
		     
}
 for(i=1;i<=n;i++)
 for(j=1;j<=n;j++)
   a[i][j]=b[i][j];
   
for(i=1;i<=n;i++)
 for(j=1;j<=n;j++)
   b[i][j]=0;
// if(l==m)
  for(i=1;i<=n;i++){
 
 for(j=1;j<=n;j++)
 //  if(a[i][j]==1)
  printf("%d ",a[i][j]);
   // else
 // printf("%c ",' '); 
  printf("\n");
}
} 

getch();
}
